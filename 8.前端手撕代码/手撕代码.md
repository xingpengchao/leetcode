## 十五、spawn 函数(Async 函数实现原理)

## 说明：spwan 函数--自动执行器，需先了解 Generator 函数，Async/await 是 Generator 函数的语法糖

```js
function spawn(genF) {
  return new Promise((resolve, reject) => {
    var gen = genF();
    function step(nextF) {
      try {
        var next = nextF();
      } catch (e) {
        return reject(e);
      }
      if (next.done) {
        return resolve(next.value);
      }
      Promise.resolve(next.value).then(
        (v) => {
          step(() => gen.next(v));
        },
        (e) => {
          step(() => gen.throw(e));
        }
      );
    }
    step(() => {
      gen.next(undefined);
    });
  });
}
```

## 十六、thunk 函数(Generator 函数实现自动流程管理原理)

## 说明

> Thunk 函数是用来解决 JS 中传名调用的一种实现方式
> Thunk 函数是一个单参数函数，只接受回调函数作为参数
> Thunk 函数用于 Generator 函数的自动流程管理

(ES5)

```js
var Thunk = function (fn) {
  return function () {
    var args = Array.prototype.slice.call(arguments);
    return function (callback) {
      args.push(callback);
      return fn.apply(this, args);
    };
  };
};
```

(ES6)

```js
const Thunk=function(fn){
  return fucntion(...args){
    return function(callback){
      return fn.call(this, ...args, callback);
    }
  }
}
```

## 十七、防抖

```js
const debounce = (func, wait) => {
  let timer;
  return function (...args) {
    let _self = this;
    if (timer) {
      clearTimeout(timer);
    }
    timer = setTimeout(() => {
      func.apply(_self, args);
    }, wait);
  };
};
```

## 十八、节流

```js
const throttle = (func, wait) => {
  let previous = 0;
  return function (...args) {
    let now = Date.now();
    let _self = this;
    if (now - previous > wait) {
      func.apply(_self, args);
      previous = now;
    }
  };
};
```
